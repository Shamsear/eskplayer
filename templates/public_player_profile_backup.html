{% extends "public_base.html" %}

{% block title %}{{ player.name }} - Player Profile{% endblock %}

{% block extra_css %}
<style>
    /* Enhanced Player Profile Hero */
    .profile-hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        position: relative;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
    }
    
    .profile-hero::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 60%);
        animation: rotate 40s linear infinite;
    }
    
    .profile-hero::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, 
            transparent 30%, 
            rgba(255,255,255,0.1) 50%, 
            transparent 70%);
        animation: shimmer 3s ease-in-out infinite;
    }
    
    @keyframes rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
    
    @keyframes shimmer {
        0% { transform: translateX(-100%) skewX(-10deg); }
        50% { transform: translateX(200%) skewX(-10deg); }
        100% { transform: translateX(-100%) skewX(-10deg); }
    }
    
    /* Enhanced Player Avatar */
    .player-avatar-wrapper {
        position: relative;
        animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-10px) rotate(2deg); }
    }
    
    .player-avatar {
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 
                    0 0 0 4px rgba(255, 255, 255, 0.4),
                    0 0 0 8px rgba(255, 255, 255, 0.2);
        transition: transform 0.3s ease;
    }
    
    .player-avatar:hover {
        transform: scale(1.1) rotate(5deg);
    }
    
    /* Glass morphism */
    .glass {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    /* Stats cards */
    .stat-card {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        padding: 1.5rem;
        border-radius: 1rem;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }
    
    .stat-card-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 0.75rem;
        font-size: 1.5rem;
    }
    
    /* Form badges */
    .form-badge {
        width: 40px;
        height: 40px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 10px;
        font-weight: bold;
        font-size: 1.1rem;
        margin: 0 0.25rem;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }
    
    .form-badge:hover {
        transform: scale(1.1);
    }
    
    .form-badge-win {
        background: linear-gradient(135deg, #4ade80, #22c55e);
        color: white;
    }
    
    .form-badge-draw {
        background: linear-gradient(135deg, #fbbf24, #f59e0b);
        color: white;
    }
    
    .form-badge-loss {
        background: linear-gradient(135deg, #f87171, #ef4444);
        color: white;
    }
    
    /* Rating badge */
    .rating-badge-large {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, #fbbf24, #f59e0b);
        color: white;
        border-radius: 50px;
        font-weight: bold;
        font-size: 1.1rem;
        box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
    }
    
    /* Rank badge */
    .rank-badge-hero {
        display: inline-block;
        padding: 0.5rem 1rem;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-radius: 25px;
        font-weight: bold;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    
    /* Award cards */
    .award-card {
        border-radius: 1rem;
        padding: 1.25rem;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }
    
    .award-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
        transform: translateX(-100%);
        transition: transform 0.6s;
    }
    
    .award-card:hover::before {
        transform: translateX(100%);
    }
    
    .award-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }
    
    /* Match result badges */
    .result-badge {
        padding: 0.375rem 0.75rem;
        border-radius: 0.5rem;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.5px;
    }
    
    .result-win {
        background: linear-gradient(135deg, #4ade80, #22c55e);
        color: white;
    }
    
    .result-draw {
        background: linear-gradient(135deg, #fbbf24, #f59e0b);
        color: white;
    }
    
    .result-loss {
        background: linear-gradient(135deg, #f87171, #ef4444);
        color: white;
    }
    
    /* Score display */
    .score-display {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 0.5rem;
        font-weight: bold;
    }
    
    /* Animations */
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .animate-slide-in {
        animation: slideIn 0.5s ease-out;
    }
</style>
{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-8">
    <!-- Player Hero Section -->
    <div class="profile-hero rounded-3xl p-8 text-white mb-8 relative animate-slide-in">
        <div class="relative z-10">
            <div class="grid md:grid-cols-12 gap-6 items-center">
                <!-- Player Photo -->
                <div class="md:col-span-2 text-center">
                    <div class="player-avatar-wrapper">
                        {% if player.photo_url %}
                            <img src="{{ player.photo_url }}" 
                                 alt="{{ player.name }}" 
                                 class="player-avatar w-32 h-32 rounded-full object-cover mx-auto">
                        {% else %}
                            <div class="player-avatar w-32 h-32 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto">
                                <i class="fas fa-user text-5xl text-white/80"></i>
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Player Info -->
                <div class="md:col-span-6">
                    <h1 class="text-4xl font-bold mb-3">{{ player.name }}</h1>
                    <div class="flex flex-wrap items-center gap-3 mb-4">
                        <span class="rating-badge-large">
                            <i class="fas fa-star mr-2"></i>{{ player.rating }} Rating
                        </span>
                        {% if player_rank %}
                            <span class="rank-badge-hero">
                                <i class="fas fa-medal mr-2"></i>#{{ player_rank }} Overall
                            </span>
                        {% endif %}
                    </div>
                    <div class="grid grid-cols-2 gap-4 max-w-sm">
                        <div class="bg-white/20 backdrop-blur-sm rounded-xl p-3">
                            <div class="text-sm opacity-90">Matches Played</div>
                            <div class="text-2xl font-bold">{{ player.matches_played or 0 }}</div>
                        </div>
                        <div class="bg-white/20 backdrop-blur-sm rounded-xl p-3">
                            <div class="text-sm opacity-90">Win Rate</div>
                            <div class="text-2xl font-bold">
                                {% if player.matches_played and player.matches_played > 0 %}
                                    {{ "%.1f"|format((player.wins or 0) * 100 / player.matches_played) }}%
                                {% else %}
                                    0.0%
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Win/Draw/Loss Stats -->
                <div class="md:col-span-4">
                    <div class="grid grid-cols-3 gap-3">
                        <div class="text-center bg-white/20 backdrop-blur-sm rounded-xl p-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-green-600 rounded-xl flex items-center justify-center mx-auto mb-2">
                                <i class="fas fa-trophy text-white text-xl"></i>
                            </div>
                            <div class="text-3xl font-bold">{{ player.wins or 0 }}</div>
                            <div class="text-sm opacity-90">Wins</div>
                        </div>
                        <div class="text-center bg-white/20 backdrop-blur-sm rounded-xl p-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-xl flex items-center justify-center mx-auto mb-2">
                                <i class="fas fa-handshake text-white text-xl"></i>
                            </div>
                            <div class="text-3xl font-bold">{{ player.draws or 0 }}</div>
                            <div class="text-sm opacity-90">Draws</div>
                        </div>
                        <div class="text-center bg-white/20 backdrop-blur-sm rounded-xl p-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-red-400 to-red-600 rounded-xl flex items-center justify-center mx-auto mb-2">
                                <i class="fas fa-times-circle text-white text-xl"></i>
                            </div>
                            <div class="text-3xl font-bold">{{ player.losses or 0 }}</div>
                            <div class="text-sm opacity-90">Losses</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Player Awards -->
    {% if player_awards %}
    <div class="glass rounded-3xl overflow-hidden mb-8 animate-slide-in" style="animation-delay: 0.1s;">
        <div class="bg-gradient-to-r from-yellow-500 to-amber-600 p-6 text-white">
            <h2 class="text-2xl font-bold flex items-center">
                <i class="fas fa-award mr-3"></i> Awards & Achievements
            </h2>
        </div>
        <div class="p-6">
            <div class="grid md:grid-cols-3 gap-4">
                {% for award in player_awards %}
                <div class="award-card {% if award.award_type == 'Golden Ball' %}bg-gradient-to-br from-yellow-400 to-amber-500{% elif award.award_type == 'Golden Boot' %}bg-gradient-to-br from-orange-500 to-red-500{% elif award.award_type == 'Golden Glove' %}bg-gradient-to-br from-teal-500 to-cyan-600{% else %}bg-gradient-to-br from-purple-500 to-pink-600{% endif %} text-white">
                    <div class="flex items-center">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center mr-3">
                            <i class="fas fa-{% if award.award_type == 'Golden Ball' %}medal{% elif award.award_type == 'Golden Boot' %}futbol{% elif award.award_type == 'Golden Glove' %}hands{% else %}award{% endif %} text-2xl"></i>
                        </div>
                        <div>
                            <div class="font-bold text-lg">{{ award.award_type }}</div>
                            <div class="text-sm opacity-90">
                                {% if award.tournament_name %}
                                    {{ award.tournament_name }}
                                {% else %}
                                    Overall Achievement
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <div class="grid lg:grid-cols-3 gap-8">
        <!-- Left Column - Statistics & Match History -->
        <div class="lg:col-span-2">
            <!-- Performance Stats -->
            <div class="glass rounded-3xl overflow-hidden mb-6 animate-slide-in" style="animation-delay: 0.2s;">
                <div class="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white">
                    <h2 class="text-2xl font-bold flex items-center">
                        <i class="fas fa-chart-line mr-3"></i> Performance Statistics
                    </h2>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="stat-card">
                            <div class="stat-card-icon bg-gradient-to-br from-red-500 to-pink-600 text-white">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">{{ total_goals_for or 0 }}</div>
                            <div class="text-sm text-gray-600">Goals Scored</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon bg-gradient-to-br from-blue-500 to-cyan-600 text-white">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">{{ total_goals_against or 0 }}</div>
                            <div class="text-sm text-gray-600">Goals Conceded</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon bg-gradient-to-br from-green-500 to-emerald-600 text-white">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">{{ "%.1f"|format((total_goals_for or 0) / (player.matches_played or 1)) }}</div>
                            <div class="text-sm text-gray-600">Goals/Match</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon bg-gradient-to-br from-purple-500 to-pink-600 text-white">
                                <i class="fas fa-plus-minus"></i>
                            </div>
                            <div class="text-3xl font-bold {% if (total_goals_for or 0) - (total_goals_against or 0) > 0 %}text-green-600{% elif (total_goals_for or 0) - (total_goals_against or 0) < 0 %}text-red-600{% else %}text-gray-800{% endif %}">
                                {% if (total_goals_for or 0) - (total_goals_against or 0) > 0 %}+{% endif %}{{ (total_goals_for or 0) - (total_goals_against or 0) }}
                            </div>
                            <div class="text-sm text-gray-600">Goal Difference</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Form -->
            <div class="glass rounded-3xl overflow-hidden mb-6 animate-slide-in" style="animation-delay: 0.3s;">
                <div class="bg-gradient-to-r from-teal-600 to-cyan-600 p-6 text-white">
                    <h2 class="text-2xl font-bold flex items-center">
                        <i class="fas fa-history mr-3"></i> Recent Form
                        <span class="ml-auto text-sm font-normal opacity-90">Last 5 Matches</span>
                    </h2>
                </div>
                <div class="p-6">
                    {% if recent_form %}
                    <div class="flex justify-center items-center gap-2">
                        <span class="text-gray-600 font-semibold mr-2">Oldest</span>
                        {% for result in recent_form %}
                            <div class="form-badge {% if result == 'W' %}form-badge-win{% elif result == 'D' %}form-badge-draw{% elif result == 'L' %}form-badge-loss{% else %}bg-gray-400{% endif %}">
                                {{ result }}
                            </div>
                        {% endfor %}
                        <span class="text-gray-600 font-semibold ml-2">Latest</span>
                    </div>
                    <div class="mt-4 text-center text-sm text-gray-600">
                        {% set wins_count = recent_form|select('equalto', 'W')|list|length %}
                        {% set draws_count = recent_form|select('equalto', 'D')|list|length %}
                        {% set losses_count = recent_form|select('equalto', 'L')|list|length %}
                        <span class="font-semibold">{{ wins_count }}W - {{ draws_count }}D - {{ losses_count }}L</span>
                    </div>
                    {% else %}
                    <div class="text-center py-4">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full mb-3">
                            <i class="fas fa-history text-gray-400 text-2xl"></i>
                        </div>
                        <p class="text-gray-600">No recent match history available</p>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Match History -->
            <div class="glass rounded-3xl overflow-hidden animate-slide-in" style="animation-delay: 0.4s;">
                <div class="bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white">
                    <h2 class="text-2xl font-bold flex items-center">
                        <i class="fas fa-gamepad mr-3"></i> Match History
                    </h2>
                </div>
                <div class="p-0">
                    {% if match_history %}
                    <div class="divide-y divide-gray-200">
                        {% for match in match_history[:10] %}
                        <div class="p-4 hover:bg-gray-50 transition-all">
                            <div class="grid md:grid-cols-12 gap-4 items-center">
                                <!-- Date -->
                                <div class="md:col-span-2">
                                    <div class="text-sm font-bold text-gray-900">{{ match.played_at.strftime('%b %d, %Y') }}</div>
                                    <div class="text-xs text-gray-600">{{ match.played_at.strftime('%H:%M') }}</div>
                                </div>
                                
                                <!-- Opponent -->
                                <div class="md:col-span-4">
                                    <div class="flex items-center">
                                        {% if match.opponent_id %}
                                            <a href="{{ url_for('public_player_profile', player_id=match.opponent_id) }}" 
                                               class="font-semibold text-gray-900 hover:text-indigo-600 transition-colors">
                                                {{ match.opponent_name }}
                                            </a>
                                        {% else %}
                                            <span class="font-semibold text-gray-700">{{ match.opponent_name }}</span>
                                            <span class="ml-2 px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded-full">Guest</span>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Score -->
                                <div class="md:col-span-2 text-center">
                                    <span class="score-display">
                                        {{ match.player_goals }} - {{ match.opponent_goals }}
                                    </span>
                                </div>
                                
                                <!-- Result -->
                                <div class="md:col-span-2 text-center">
                                    <span class="result-badge {% if match.result == 'W' %}result-win{% elif match.result == 'D' %}result-draw{% elif match.result == 'L' %}result-loss{% else %}bg-gray-400{% endif %}">
                                        {% if match.result == 'W' %}WIN
                                        {% elif match.result == 'D' %}DRAW
                                        {% elif match.result == 'L' %}LOSS
                                        {% else %}{{ match.result }}{% endif %}
                                    </span>
                                </div>
                                
                                <!-- Rating Change -->
                                <div class="md:col-span-2 text-right">
                                    {% if match.rating_change %}
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-bold
                                            {% if match.rating_change > 0 %}bg-green-100 text-green-700
                                            {% elif match.rating_change < 0 %}bg-red-100 text-red-700
                                            {% else %}bg-gray-100 text-gray-700{% endif %}">
                                            {% if match.rating_change > 0 %}
                                                <i class="fas fa-arrow-up mr-1"></i>+{{ match.rating_change }}
                                            {% elif match.rating_change < 0 %}
                                                <i class="fas fa-arrow-down mr-1"></i>{{ match.rating_change }}
                                            {% else %}
                                                {{ match.rating_change }}
                                            {% endif %}
                                        </span>
                                    {% else %}
                                        <span class="text-gray-400">-</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-12">
                        <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full mb-4">
                            <i class="fas fa-gamepad text-gray-400 text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-700">No match history available</h3>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Right Column - Side Stats -->
        <div class="lg:col-span-1">
            <!-- Tournament Participation -->
            <div class="glass rounded-2xl overflow-hidden mb-6 animate-slide-in" style="animation-delay: 0.5s;">
                <div class="bg-gradient-to-r from-amber-600 to-yellow-600 p-4 text-white">
                    <h3 class="text-lg font-bold flex items-center">
                        <i class="fas fa-trophy mr-2"></i> Tournaments
                    </h3>
                </div>
                <div class="p-4">
                    {% if tournament_participation %}
                        <div class="space-y-3">
                            {% for tournament in tournament_participation %}
                            <div class="p-3 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl hover:shadow-md transition-all">
                                <div class="font-semibold text-gray-900 mb-1">{{ tournament.tournament_name }}</div>
                                <div class="flex justify-between items-center">
                                    <span class="text-xs text-gray-600">{{ tournament.matches_played }} matches</span>
                                    <div class="flex items-center gap-2">
                                        <span class="px-2 py-1 bg-green-100 text-green-700 text-xs font-bold rounded">{{ tournament.wins }}W</span>
                                        <span class="px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-bold rounded">{{ tournament.draws }}D</span>
                                        <span class="px-2 py-1 bg-red-100 text-red-700 text-xs font-bold rounded">{{ tournament.losses }}L</span>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-trophy text-gray-400 text-2xl mb-2"></i>
                            <p class="text-gray-600 text-sm">No tournament participation yet</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Head-to-Head Records -->
            {% if vs_opponents %}
            <div class="glass rounded-2xl overflow-hidden mb-6 animate-slide-in" style="animation-delay: 0.6s;">
                <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-4 text-white">
                    <h3 class="text-lg font-bold flex items-center">
                        <i class="fas fa-users mr-2"></i> Head-to-Head
                    </h3>
                </div>
                <div class="p-4">
                    <div class="space-y-2">
                        {% for opponent in vs_opponents[:5] %}
                        <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg transition-all">
                            <div class="flex items-center">
                                {% if opponent.opponent_photo_url %}
                                    <img src="{{ opponent.opponent_photo_url }}" 
                                         alt="{{ opponent.opponent_name }}" 
                                         class="w-8 h-8 rounded-full object-cover mr-2 border-2 border-gray-200">
                                {% else %}
                                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center mr-2">
                                        <i class="fas fa-user text-white text-xs"></i>
                                    </div>
                                {% endif %}
                                <a href="{{ url_for('public_player_profile', player_id=opponent.opponent_id) }}" 
                                   class="font-semibold text-gray-900 hover:text-indigo-600 transition-colors text-sm">
                                    {{ opponent.opponent_name }}
                                </a>
                            </div>
                            <div class="flex items-center gap-1">
                                <span class="text-xs font-bold {% if opponent.wins > opponent.losses %}text-green-600{% elif opponent.wins < opponent.losses %}text-red-600{% else %}text-gray-600{% endif %}">
                                    {{ opponent.wins }}-{{ opponent.draws }}-{{ opponent.losses }}
                                </span>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Rating Progress -->
            {% if rating_trend %}
            <div class="glass rounded-2xl overflow-hidden animate-slide-in" style="animation-delay: 0.7s;">
                <div class="bg-gradient-to-r from-purple-600 to-pink-600 p-4 text-white">
                    <h3 class="text-lg font-bold flex items-center">
                        <i class="fas fa-chart-line mr-2"></i> Rating Trend
                    </h3>
                </div>
                <div class="p-4">
                    <div class="space-y-2">
                        {% for trend in rating_trend[-5:] %}
                        <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg transition-all">
                            <span class="text-sm text-gray-600">{{ trend.match }}</span>
                            <div class="flex items-center gap-2">
                                <span class="font-bold text-gray-900">{{ trend.rating }}</span>
                                {% if trend.change != 0 %}
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold
                                    {% if trend.change > 0 %}bg-green-100 text-green-700
                                    {% elif trend.change < 0 %}bg-red-100 text-red-700
                                    {% else %}bg-gray-100 text-gray-700{% endif %}">
                                    {% if trend.change > 0 %}+{% endif %}{{ trend.change }}
                                </span>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Back Button -->
    <div class="text-center mt-8">
        <a href="{{ url_for('public_rankings') }}" 
           class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl font-semibold hover:shadow-lg transform hover:-translate-y-1 transition-all">
            <i class="fas fa-arrow-left mr-2"></i> Back to Rankings
        </a>
    </div>
</div>
{% endblock %}
